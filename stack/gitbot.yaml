context:
  cfntools: 'https://s3.amazonaws.com/cloudformation-examples/aws-cfn-bootstrap-latest.tar.gz'
  instances:
    - t1.micro
    - m1.small
    - m1.medium
    - m1.large
    - m1.xlarge
    - m2.xlarge
    - m2.2xlarge
    - m2.4xlarge
    - c1.medium
    - c1.xlarge
    - cc1.4xlarge
    - cc2.8xlarge
    - cg1.4xlarge

  instanceToArch:
    c1.medium:
      Arch: '64'
    c1.xlarge:
      Arch: '64'
    m1.large:
      Arch: '64'
    m1.medium:
      Arch: '64'
    m1.small:
      Arch: '64'
    m1.xlarge:
      Arch: '64'
    m2.2xlarge:
      Arch: '64'
    m2.4xlarge:
      Arch: '64'
    m2.xlarge:
      Arch: '64'
    t1.micro:
      Arch: '64'
  regionArchToAMI:
    ap-northeast-1:
      '32': aki-42992843
      '64': aki-44992845
    ap-southeast-1:
      '32': aki-f81354aa
      '64': aki-fe1354ac
    ap-southeast-2:
      '32': aki-33990e09
      '64': aki-31990e0b
    eu-west-1:
      '32': aki-75665e01
      '64': aki-71665e05
    sa-east-1:
      '32': aki-ca8f51d7
      '64': aki-c48f51d9
    us-east-1:
      '32': aki-b6aa75df
      '64': aki-88aa75e1
    us-west-1:
      '32': aki-f57e26b0
      '64': aki-f77e26b2
    us-west-2:
      '32': aki-fa37baca
      '64': aki-fc37bacc

source_dir: source
source_patterns: '*.json'
output_dir: out
search_paths: scripts
publish:
  bucket: gitbot_stack
  path: cfn/v1.0
  main: main.json
  stack_name: gitbot-stack
  params:
    RedisStackURL: '{{ url_for("redis.json") }}'
    KeyName: '{{ data.app_key }}'
    SiteElasticIP: '{{ data.app_ip }}'
    Domain: '{{ data.app_domain }}'
    GithubClientId: '{{ data.githubClientId }}'
    GithubClientSecret: '{{ data.githubClientSecret }}'
    WebSource: '{{ data.websource_url|default('') }}'
    AppSource: '{{ data.appsource_url|default('') }}'
